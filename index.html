<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hi i'm paul</title>
    <link rel="icon" href="images/tinyguru3-10px_small.png" type="image/png">

<style>
    
/* BASE STYLES */
body {
    background-color: #000;
    color: #fff;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 16px;
    margin: 0;
    padding: 0;
    display: flex;
    min-height: 100vh;
    box-sizing: border-box;
}

h1, h2 {
    margin-top: 0;
    margin-bottom: 0;
}

/* MAIN CONTAINER */
.main-container {
    width: 75%;
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-grow: 1;
    padding-bottom: 50px;
    align-items: flex-start;
}

/* LEFT COLUMN (STICKY NAV) */
.left-column {
    flex-basis: 33.33%;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    position: sticky;
    top: 0;
    height: 90vh;
    padding-right: 20px;
    box-sizing: border-box;
}

.left-content {
    width: 75%;
    margin-top: 14vh;
}

.left-content h1, .left-content h2 {
    margin: 0;
}

.description-text {
    color: #ddd;
    font-size: 16px;
    font-weight: normal;
    line-height: 1.5;
    margin-top: 16px;
    margin-bottom: 16px;
}

/* LEFT NAV LINKS */
.left-content nav a {
    color: #fff;
    text-decoration: none;
    display: block;
    margin: 10px 0;
    padding: 5px 0px;
    transition: color 0.3s;
}

.left-content nav a:hover {
    color: #b3ff00;
}

.left-content nav a.active {
    color: #b3ff00;
    font-weight: bold;
}

/* RIGHT COLUMN WRAPPER */
.right-column-wrapper {
    flex-basis: 66.66%;
    flex-grow: 1;
    margin-top: 16.5vh; /* forgot original */
    padding-left: 20px; 
    box-sizing: border-box;
    position: relative;
}

.right-column-wrapper h2 {
    margin: 0 0 8px 0; /* */
}
    
/* Base styles for content loaded into the right column */
.content-section p, 
.right-column-wrapper p {
    color: #ddd;
    line-height: 1.5;
    margin-bottom: 16px;
    /* KEY FOR SPACING */
    white-space: pre-wrap; 
}

.content-section {
    padding: 32px 0;
}

/* DEFAULT SPLASH IMAGE STYLES */
.home-image-container {
    width: 100%;
    line-height: 0; /* Prevents extra space below the image */
}

.home-image-container img {
    display: block;
    width: 100%;
    margin-top: .5vh; /* forgot original */
    height: auto;
    object-fit: cover;
}

/* TIMELINE STYLES */
.timeline {
    position: relative;
    padding: 20px 0 2px 30px;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #444;
}

.timeline-item-link {
    position: relative;
    display: block;
    margin-bottom: 30px;
    padding: 0 0 0 20px;
    text-decoration: none;
    color: #fff;
    transition: color 0.3s ease;
}

.timeline-item-link:hover {
    color: #b3ff00;
    cursor: pointer;
}

.timeline-item-link::before {
    content: '';
    position: absolute;
    left: -10px;
    top: 5px;
    width: 8px;
    height: 8px;
    background: #b3ff00;
    border-radius: 50%;
    z-index: 1;
}

.timeline-date {
    color: #ccc;
}

/* POPUP GALLERY STYLES */
#columnPopup {
    position: fixed; 
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999; 
    cursor: pointer;
}

#columnPopup img,
#columnPopup video { 
    max-width: 90%; 
    max-height: 90%;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    object-fit: contain;
    opacity: 1; 
    transition: opacity 0.3s ease;
    cursor: default; 
}

.gallery-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #fff;
    font-size: 2em;
    cursor: pointer;
    padding: 20px;
    user-select: none;
    z-index: 10000;
}

#prevBtn { left: 30px; }
#nextBtn { right: 30px; }

.gallery-btn:hover {
    color: #b3ff00;
}

/* MOBILE RESPONSIVE */
@media (max-width: 800px) {
    .main-container {
        width: 84%;
        flex-direction: column;
        margin: 0px 4px;
    }

    .left-column {
        position: static;
        width: 100%;
        padding-right: 0;
        justify-content: flex-start;
        align-items: flex-start;
        height: auto; 
    }

    .left-content {
        width: 100%;
        text-align: left;
        margin-top: 0;
        padding-top: 0;
    }

    .left-content nav a {
        display: inline-block;
        margin: 0 10px 10px 0; 
    }

    .right-column-wrapper {
        flex-basis: 100%;
        padding-left: 0;
        padding-top: 0;
    }
    /* Mobile fix: remove top padding on loaded content */
    .right-column-wrapper > *:first-child {
        padding-top: 0 !important; 
    }
}

@media (max-width: 600px) {
    .gallery-btn {
        font-size: 2em;
        padding: 10px;
    }
    #prevBtn { left: 5px; }
    #nextBtn { right: 5px; }
}

</style>
</head>

<body>

<div class="main-container">

    <div class="left-column">
        <div class="left-content">
            <a href="https://artsandtoys.github.io/djpaularthur/" style="text-decoration: none; color: inherit;">
            <h1>Paul Arthur</h1>
            </a>
            <br>
            <h2>Melodic Storyteller</h2>

            <div class="description-text">
                Audio / Visual Artist & Human
            </div>

            <nav>
                <a href="about" class="nav-link" data-content-file="about.html">about &ensp;</a>
                <a href="music" class="nav-link" data-content-file="catalog.html">music &ensp;</a>
                <a href="snaps" class="nav-link" data-content-file="gallery.html">snaps &ensp;</a>
                <a href="tours" class="nav-link" data-content-file="touring.html">tours &ensp;</a>
            </nav>
        </div>
    </div>

    <div class="right-column-wrapper">
        <div id="splash-content" class="content-section">
            <div class="home-image-container">
               <!-- code goes here -->
                <img src="images/web_banner-djpaularthur-000.png" alt="Splash Image"> 
            </div>
        </div>
    </div>
    
</div>


    
<script>
    
document.addEventListener('DOMContentLoaded', () => {

    const rightColumn = document.querySelector('.right-column-wrapper');
    const navLinks = document.querySelectorAll('.left-content nav a.nav-link');
    // Get the static content and footer elements
    const defaultSplash = document.getElementById('splash-content'); 
    const staticFooter = document.getElementById('static-footer');
    
    // --- UTILITY FUNCTIONS ---
    function removeActiveClasses() {
        navLinks.forEach(link => link.classList.remove('active'));
    }

    // Function to hide the static content when a link is clicked
    function hideDefaultContent() {
        if (defaultSplash) defaultSplash.style.display = 'none';
        if (staticFooter) staticFooter.style.display = 'none'; 
        // Clear any content that might have been loaded dynamically previously
        // We use innerHTML = '' on the rightColumn before insertion, but this ensures safety
        rightColumn.innerHTML = ''; 
    }

    // Function to load content dynamically via fetch
    async function loadContent(fileName) {
        // 1. Hide the static splash content before loading new content
        hideDefaultContent(); 
        
        try {
            const response = await fetch(fileName);
            if (!response.ok) {
                throw new Error(`Failed to load content file: ${fileName}`);
            }
            const htmlContent = await response.text();

            // 2. Insert new HTML
            rightColumn.innerHTML = htmlContent;
            window.scrollTo(0, 0); 

            // 3. Re-attach event listeners (especially for the gallery)
            attachGalleryTriggers(); 

        } catch (error) {
            console.error('Content loading error:', error);
            rightColumn.innerHTML = `<h2>Error</h2><p>Could not load content for ${fileName}. Please ensure <code>${fileName}</code> exists in the same directory.</p>`;
        }
    }

    // --- NAV LINK CLICK HANDLER ---
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();

            const contentFile = this.getAttribute('data-content-file');
            if (contentFile) {
                loadContent(contentFile);
                
                removeActiveClasses();
                this.classList.add('active');
            }
        });
    });

    // GALLERY POPUP LOGIC (Requires works.html to be loaded) 
    let currentGallery = [];
    let currentIndex = 0;
    let keyboardListenerAdded = false; 

    function clearMedia(popup) {
        popup.querySelectorAll('img, video').forEach(el => {
            if (el.tagName && el.tagName.toLowerCase() === 'video') {
                try { el.pause(); } catch (err) {}
                el.removeAttribute('src');
            }
            el.remove();
        });
    }

    function showMedia(popup, prevBtn, nextBtn, index) {
        clearMedia(popup);
        const src = currentGallery[index];
        if (!src) return;

        const isVideo = src.match(/\.(mp4|webm)(\?.*)?$/i);
        const insertionPoint = nextBtn; 

        if (isVideo) {
            const video = document.createElement('video');
            video.src = src;
            video.controls = true;
            video.autoplay = true;
            video.muted = true;
            video.loop = true;
            video.playsInline = true;
            video.style.maxWidth = '100%';
            video.maxHeight = '100%';
            video.setAttribute('aria-label', 'Gallery video');
            popup.insertBefore(video, insertionPoint);

            video.addEventListener('error', (ev) => console.warn('Video error', ev));
            video.play().catch(err => {
                console.warn('Play promise rejected:', err);
            });
        } else {
            const img = document.createElement('img');
            img.src = src;
            img.alt = 'Gallery image';
            img.style.maxWidth = '100%';
            img.maxHeight = '100%';
            popup.insertBefore(img, insertionPoint);
        }
    }
    
    // Attaches all gallery-related events after new content is loaded
    function attachGalleryTriggers() {
        // The popup element is loaded inside works.html, so we query the main column wrapper
        // The popup itself must be an ID, so we look for it in the newly loaded content
        const popup = rightColumn.querySelector('#columnPopup');
        if (!popup) return;

        const prevBtn = popup.querySelector('#prevBtn');
        const nextBtn = popup.querySelector('#nextBtn');
        
        // Define trigger handler
        const galleryTriggerHandler = function(e) {
             e.preventDefault();
             // The gallery must be attached to the main body's event listener for key presses to work
             currentGallery = e.currentTarget.dataset.images.split(',').map(x => x.trim()).filter(x => x.length);
             currentIndex = 0;
             showMedia(popup, prevBtn, nextBtn, currentIndex);
             popup.style.display = 'flex';
        };

        // Targets gallery triggers in the currently loaded content
        rightColumn.querySelectorAll('.gallery-trigger').forEach(item => {
            item.removeEventListener('click', galleryTriggerHandler);
            item.addEventListener('click', galleryTriggerHandler);
        });
        
        // ATTACH NAV BUTTON EVENTS
        nextBtn.onclick = (e) => {
            e.stopPropagation();
            if (!currentGallery.length) return;
            currentIndex = (currentIndex + 1) % currentGallery.length;
            showMedia(popup, prevBtn, nextBtn, currentIndex);
        };

        prevBtn.onclick = (e) => {
            e.stopPropagation();
            if (!currentGallery.length) return;
            currentIndex = (currentIndex - 1 + currentGallery.length) % currentGallery.length;
            showMedia(popup, prevBtn, nextBtn, currentIndex);
        };

        // ATTACH CLOSE EVENT (Only on background click)
        popup.onclick = (e) => {
            if (e.target === popup) {
                popup.style.display = 'none';
                const vid = popup.querySelector('video');
                if (vid) vid.pause();
                clearMedia(popup); 
            }
        };

        // ATTACH KEYBOARD EVENTS (Add only once to the document)
        if (!keyboardListenerAdded) {
            document.addEventListener('keydown', keyboardHandler);
            keyboardListenerAdded = true;
        }
    }
    
    // KeyDown Handler Definition
    function keyboardHandler(e) {
        // Since the popup element is dynamically loaded, we must query the main document for its existence
        const popup = document.querySelector('#columnPopup'); 
        
        if (popup && popup.style.display === 'flex') {
            const prevBtn = popup.querySelector('#prevBtn');
            const nextBtn = popup.querySelector('#nextBtn');
            
            if (e.key === 'Escape') {
                popup.querySelectorAll('video').forEach(v => { try { v.pause(); } catch (err) {} });
                popup.style.display = 'none';
                clearMedia(popup);
            }
            if (e.key === 'ArrowRight' && nextBtn) nextBtn.click();
            if (e.key === 'ArrowLeft' && prevBtn) prevBtn.click();
        }
    }
    
    // --- Disable right-click on the entire page --- 
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        alert("Right-click is disabled on this page.");
    });
});
    
</script>

</body>
    
</html>
